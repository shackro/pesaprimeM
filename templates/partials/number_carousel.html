<!-- templates/components/number_carousel.html -->
<div id="number-carousel" class="mt-6 relative overflow-hidden bg-gray-800 rounded-lg py-4">
  <div class="relative">
    <!-- Left Gradient Overlay -->
    <div class="absolute left-0 top-0 bottom-0 w-20 bg-gradient-to-r from-gray-800 to-transparent z-10"></div>

    <!-- Right Gradient Overlay -->
    <div class="absolute right-0 top-0 bottom-0 w-20 bg-gradient-to-l from-gray-800 to-transparent z-10"></div>

    <!-- Carousel Track -->
    <div id="carousel-track" class="flex space-x-3 animate-scroll"></div>
  </div>
</div>

<script>
async function fetchNumbers() {
    const response = await fetch("{% url 'core:number_carousel' %}");
    const data = await response.json();
    const track = document.getElementById('carousel-track');
    track.innerHTML = '';

    data.numbers.forEach(number => {
        const card = document.createElement('div');
        card.className = "flex-shrink-0 w-60 bg-gradient-to-br from-teal-500 to-emerald-600 rounded-lg p-2 text-center shadow-lg transform hover:scale-105 transition-transform duration-300";

        const profitColor = number.profit > 0 ? 'green' : (number.profit < 0 ? 'red' : 'gray');
        const profitSign = number.profit > 0 ? '+' : '';

        card.innerHTML = `
            <div class="text-white font-mono font-bold text-lg mb-1">${number.phone}</div>
            <div class="flex items-center justify-center space-x-1 mb-2">
                <div class="flex items-center bg-${profitColor}-500 bg-opacity-30 px-2 py-1 rounded-full">
                    <span class="text-${profitColor}-300 text-xs font-semibold ml-1">${profitSign}${number.profit}%</span>
                </div>
            </div>
            <div class="text-teal-200 text-sm font-semibold">KES ${number.amount.toLocaleString()}</div>
        `;
        track.appendChild(card);
    });
}

fetchNumbers();
setInterval(fetchNumbers, 30000); // Refresh every 30s
</script>

<style>
@keyframes scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}
.animate-scroll {
  display: flex;
  animation: scroll 20s linear infinite;
}
</style>
